- ____ — via [Redis 6.0 新特性-多线程连环13问！](https://getpocket.com/read/3498674643) [+Roam](<+Roam.md>)
    - Redis6.0之前的版本真的是单线程吗？
        - Redis在处理客户端的请求时，包括获取 (socket 读)、解析、执行、内容返回 (socket 写) 等都由一个顺序串行的主线程处理，这就是所谓的“单线程”。但如果严格来讲从Redis4.0之后并不是单线程，除了主线程外，它也有后台线程在处理一些较为缓慢的操作，例如清理脏数据、无用连接的释放、大 key 的删除等等。
    - Redis瓶颈主要在于网络的 IO 消耗, 优化主要有两个方向:
        - 提高网络 IO 性能，典型的实现比如使用 DPDK 来替代内核网络栈的方式
        - 使用多线程充分利用多核，典型的实现比如 Memcached
    - redis支持多线程主要就是两个原因：
        - 可以充分利用服务器 CPU 资源，目前主线程只能利用一个核
        - 多线程任务可以分摊 Redis 同步 IO 读写负荷
    - Redis6.0的多线程默认是禁用的，只使用主线程
    - Redis6.0多线程开启时，线程数如何设置？
        - 关于线程数的设置，官方有一个建议：4核的机器建议设置为2或3个线程，8核的建议设置为6个线程，线程数一定要小于机器核数。还需要注意的是，线程数并不是越大越好，官方认为超过了8个基本就没什么意义了。
    - Redis6.0多线程该设计有如下特点：
        - IO 线程要么同时在读 socket，要么同时在写，不会同时读或写
        - IO 线程只负责读写 socket 解析命令，不负责命令处理
    - 开启多线程后，是否会存在线程并发安全问题？
        - Redis的多线程部分只是用来处理网络数据的读写和协议解析，执行命令仍然是单线程顺序执行。
    - Redis6.0与Memcached多线程模型对比：
        - 相同点：都采用了 master线程-worker 线程的模型
        - 不同点：Memcached 执行主逻辑也是在 worker 线程里，模型更加简单，实现了真正的线程隔离，符合我们对线程隔离的常规理解。而 Redis 把处理逻辑交还给 master 线程，虽然一定程度上增加了模型复杂度，但也解决了线程并发安全等问题。
    - Redis线程中经常提到IO多路复用，如何理解？
        - 多路指的是多个socket连接，复用指的是复用一个线程。
        - 多路复用主要有三种技术：select，poll，epoll
        - epoll是最新的也是目前最好的多路复用技术。采用多路 I/O 复用技术可以让单个线程高效的处理多个连接请求
    - Redis的彩蛋命令LOLWUT，可以输出一个充满艺术气息的图形和Redis版本
- [R2M问题总结](<R2M问题总结.md>) 

# Backlinks
## [2021-12-07~2021-12-10](<2021-12-07~2021-12-10.md>)
- [December 8th, 2021](<December 8th, 2021.md>)

