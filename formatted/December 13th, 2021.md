- ____ — via [Redis内部数据结构SDS详解 - 51CTO.COM](https://stor.51cto.com/art/202006/619769.htm) [+Roam](<+Roam.md>)
    - Redis的string类型一共有三种存储方式，当字符串长度小于等于44，底层采用embstr;当字符串长度大于44，底层采用raw;当设置是整数，底层则采用int。
    - 所有类型的数据结构最外层都是RedisObject
    - SDS的优势
        - 更快速的获取字符串长度
            - 在原来的字符数组外面增加总长度，和已用长度，这样每次直接获取已用长度即可。复杂度为O(1)。
        - 数据安全，不会截断
            - 如果传统字符串保存图片，视频等二进制文件，中间可能出现'\0'，如果按照原来的逻辑，会造成数据丢失。所以可以用已用长度来表示是否字符数组已结束。
        - String类型的删除并不是直接回收内存，而是修改字符，让其为空字符，这其实是惰性释放，等待将来使用。在调用sdsempty方法时，再次调用上面的sdsnewlen方法。
        - 如果空闲空间大于要添加的字符串t的长度，则直接返回，不需要扩容。
        - 如果目前的字符串小于1M，则直接扩容双倍
        - 如果目前的字符串大于1M，则直接添加1M
